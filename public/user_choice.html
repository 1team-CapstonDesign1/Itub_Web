<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/user_choice_style.css">
    <title>추천 모드</title>
</head>

<body>
    <form action='/own' method='POST'>
        <button type='submit' id='own_submit'></button>
    </form>

    <form action='/recommend' method='POST'>
        <button type='submit' id='recommend_submit'></button>
    </form>

    <form action='/online' method='POST'>
        <button type='submit' id='online_submit'></button>
    </form>

    <div class="wrap">
        <form>
            <!-- 서버로 메시지를 보낼 텍스트 박스 -->
            <input id="textMessage" type="text">
            <!-- 전송 버튼 -->
            <input onclick="sendMessage()" value="Send" type="button">
            <!-- 접속 종료 버튼 -->
            <input onclick="disconnect()" value="Disconnect" type="button">
        </form>

        <div class="lidiv">
            <a onclick='document.getElementById("own_submit").click()'> <img src="./images/own_setting_image.jpg"
                    class=""></a>
        </div>

        <div class="col-wrap">
            <div class="col-div">
                <a onclick='document.getElementById("recommend_submit").click()'><img src="./images/recommend_image.jpg"
                        class=""></a>

            </div>
            <div class="col-div">
                <a onclick='document.getElementById("online_submit").click()'><img src="./images/online_image.jpg"
                        class=""></a>

            </div>
        </div>
    </div>

    <script>
        var webSocket = new WebSocket("ws://localhost:9998");

        var messageTextArea = '신호 보낸다.'

        // 소켓 접속이 되면 호출되는 함수
        webSocket.onopen = function (message) {
            messageTextArea.value += "Server connect...\n";
        };
        // 소켓 접속이 끝나면 호출되는 함수
        webSocket.onclose = function (message) {
            messageTextArea.value += "Server Disconnect...\n";
        };
        // 소켓 통신 중에 에러가 발생되면 호출되는 함수
        webSocket.onerror = function (message) {
            messageTextArea.value += "error...\n";
        };
        // 소켓 서버로 부터 메시지가 오면 호출되는 함수.
        webSocket.onmessage = function (message) {
            // 출력 area에 메시지를 표시한다.
            messageTextArea.value += "Recieve From Server => " + message.data + "\n";
        };

        function sendMessage() {
            var message = document.getElementById("textMessage");
            messageTextArea.value += "Send to Server => " + message.value + "\n";
            //웹소켓으로 textMessage객체의 값을 보낸다.
            webSocket.send(message.value);
            //textMessage객체의 값 초기화
            message.value = "";
        }
        function disconnect() {
            webSocket.close();
        }

    </script>
</body>

</html>